README for c.vim (Version 3.4) / Dec 23 2003


  *  RELEASE NOTES 
  *  FILES
  *  INSTALLATION
  *  CONFIGURATION
  *  TEMPLATE FILES AND TAGS
  *  CODE SNIPPETS
  *  C DICTIONARIES
  *  SPEED UP TYPING

=======================================================================================
  RELEASE NOTES FOR VERSION 3.4
=======================================================================================

+ Two new global variables: C_Dictionary_File, C_MenuHeader .
+ The preprocessor statements #if... and the function idiom include marked 
  lines when invoked in visual mode.

=======================================================================================
  RELEASE NOTES FOR VERSION 3.3
=======================================================================================

+ The C/C++ root menu can be disabled.

=======================================================================================
  RELEASE NOTES FOR VERSION 3.2
=======================================================================================

+ Only one C/C++ entry in the gVim root menu.
+ All hotkeys are only defined for C/C++ files (file type plugin added).
+ The following constructs are now read as templates from files:
   class, class using new, 
   template class, template class using new,
   error class
+ Install script added.
+ Customization improved. 
+ Documentation improved (help file added).
+ Bug fix (template file handling)

=======================================================================================
  RELEASE NOTES FOR VERSION 3.1
=======================================================================================

+ When the comment style "C" is active the menu entry "Comments.code->comment"
  turns a marked region in one multiline C-comment.
+ The menu entry "Comments.comment->code"  turns marked multiline C-comment 
  back into code.

+ A marked region can be surrounded by a for-, if, if-else, while-, do-while-statement
  (with indentation).

+ The menu entry "Snippets.make prototype" makes a C- or C++-prototype from 
  the current line or marked region and puts it in an internal buffer.
+ The menu entry "Snippets.add prototype" also makes a C- or C++-prototype from 
  the current line or a marked region and adds it to the internal buffer.
+ The menu entry "Snippets.put prototype" inserts all gathered prototypes 
  below the current line. 

+ Tag substitution rewritten (Some characters in a substitution text for a tag 
  prevented the tag from being substituted).



=======================================================================================
  RELEASE NOTES FOR VERSION 3.0
=======================================================================================

+ C-style comments AND C++-style comments are supported now.

+ The menu entry 'Comments->Comment style ..' switches the styles (toggle).

+ Block comments are now read as templates or skeletons from files:
    Frame Block,        Function Description,  Method Description,
    Class Description,  H+file header,         C/C++-file header

+ These templates can contain tags like |FILENAME|, |AUTHOR| etc. which are replaced
  after reading (KDevelop templates can be used without any change).

+ indentation: multiline inserts and code snippets will be indented after insertion.

+ Most menu entries are now also active in normal mode.

+ new menu items: 
    includes for the C99 header, 
    includes for the standard C++ header,
    includes for the C++ version of the Standard C Library header,
    multiline C comment
    vim modeline

+ Reading the templates is done in one function which can be called in an autocmd.

+ Code cleanup: register z no longer used. Most function calls are silent now.


=======================================================================================
  FILES
=======================================================================================

README                                         This file.

install.sh                                     Install script

plugin/c.vim                                   The C/C++ plugin for GVIM.


plugin/templates/c-class-description            -+- C-style and C++-style template files
plugin/templates/c-file-header                   |  (see section TEMPLATE FILES below).
plugin/templates/c-frame                         |   
plugin/templates/c-function-description          |
plugin/templates/c-method-description            |
plugin/templates/cpp-class-description           | 
plugin/templates/cpp-file-header                 |
plugin/templates/cpp-frame                       |
plugin/templates/cpp-function-description        |
plugin/templates/cpp-method-description          |
plugin/templates/h-file-header                   |
plugin/templates/hpp-file-header                 |
plugin/templates/c-class                         |
plugin/templates/c-class-using-new               |
plugin/templates/c-template-class                |
plugin/templates/c-template-class-using-new      |
plugin/templates/c-error-class                   |
plugin/templates/cpp-class                       |
plugin/templates/cpp-class-using-new             |
plugin/templates/cpp-template-class              |
plugin/templates/cpp-template-class-using-new    |
plugin/templates/cpp-error-class                -+


-----------------------   -------------------------------------------------------------
                          The following files and extensions are for convenience only.
                          c.vim will work without them.
                          -------------------------------------------------------------

ftplugin/c.vim                  A filetype plugin. Define hotkeys, creates a local dictionary 
                                for each C/C++ file.

rc/c.vimrc                      The minimal additions which should be added to $HOME/.vimrc .

rc/costumization.vimrc          Additional settings I use in .vimrc:  incremental search,
                                tabstop, hot keys, font, use of dictionaries, ...
                                The file is commented. Append it to your .vimrc if you like.

rc/costumization.gvimrc         Additional settings I use in .gvimrc:
                                hot keys, mouse settings, ...
                                The file is commented. Append it to your .gvimrc if you like.

doc/csupport.txt                The help file for the local online help. 
                          
wordlists/c-c++-keywords.list   All C and C++ keywords (already in word.list).
                    
wordlists/german.list           German words for commenting sources.
                    
wordlists/k+r.list              K&R-Book: Words from the table of content. They appear
                                frequently in comments.
                    
wordlists/stl_index.list        Standard Template Library (STL): method and type names
                    
wordlists/xforms.list           XFORMS library: macro and function names

=======================================================================================
  INSTALLATION
=======================================================================================

The subdirectories in the zip archive  cvim.zip  mirror the directory structure 
which is needed below the local installation directory $HOME/.vim/ .

(1) Create the following directories if they do not already exist:

      mkdir $HOME/.vim
      mkdir $HOME/.vim/doc
      mkdir $HOME/.vim/ftplugin
      mkdir $HOME/.vim/plugin
      mkdir $HOME/.vim/plugin/templates
      mkdir $HOME/.vim/wordlists
      mkdir $HOME/.vim/codesnippets-c

(2) Move the content of the corresponding subdirectories of the distribution into these
    subdirectories.

(3) Start Vim or gVim and generate the local help tags file with the following command:

      :helptags $target_dir
      
    You can see an entry for the local help file when you do:

      :help local-additions

(4) Append at least the file  rc/c.vimrc  to  $HOME/.vimrc  :

      cat rc/c.vimrc  >> $HOME/.vimrc

(5) Do the configuration described below (personal details, ... )

    ---------------------------------------------------------------------

If you are on LINUX or U**X steps 1 - 5 can be done by calling the script  install.sh 
with the command line option -p :
	
	./install.sh -p

If you have already a personalized .vimrc call the script without an option:
	
	./install.sh 

If $HOME/.vim is NOT your target directory than call the script with the -t option 
followed by the name of a subdirectory:

	./install.sh -t xyz

The files go now to $HOME/xyz .


=======================================================================================
  CONFIGURATION
=======================================================================================

Several global variables are checked by the script to customize it:

  --------------------------------------------------------------------------------
  GLOBAL VARIABLE           DEFAULT VALUE                      TAG (see below)
  --------------------------------------------------------------------------------
  g:C_AuthorName            ""                                 |AUTHOR|
  g:C_AuthorRef             ""                                 |AUTHORREF|
  g:C_Email                 ""                                 |EMAIL|
  g:C_Company               ""                                 |COMPANY|   
  g:C_Project               ""                                 |PROJECT|
  g:C_CopyrightHolder       ""                                 |COPYRIGHTHOLDER|

  g:C_Template_Directory    $HOME."/.vim/plugin/templates/"
  g:C_Template_C_File       "c-file-header"
  g:C_Template_Class        "c-class-description"
  g:C_Template_Frame        "c-frame"
  g:C_Template_Function     "c-function-description"
  g:C_Template_H_File       "h-file-header"
  g:C_Template_Method       "c-method-description"
  g:Cpp_Template_C_File     "cpp-file-header"
  g:Cpp_Template_Class      "cpp-class-description"
  g:Cpp_Template_Frame      "cpp-frame"
  g:Cpp_Template_Function   "cpp-function-description"
  g:Cpp_Template_H_File     "hpp-file-header"
  g:Cpp_Template_Method     "cpp-method-description"

  g:C_Comments              "yes"
  g:C_CodeSnippets          $HOME."/.vim/codesnippets-c/"
  g:C_Pager                 "less"
  g:C_Dictionary_File       ""
  g:C_LoadMenus             "yes"
  g:C_MenuHeader            "yes"

  g:C_CExtension            "c"                
  g:C_CCompiler             "gcc"              
  g:C_CplusCompiler         "g++"              
  g:C_CFlags                "-Wall -g -O0 -c"  
  g:C_LFlags                "-Wall -g -O0"     
  g:C_Libs                  "-lm"              

  -----------------------------------------------------------------------------------

1. group: Defines the text which will be inserted for the tags when a template  
          is read in (see also TEMPLATE FILES AND TAGS below).

          g:C_AuthorName      : author name
          g:C_AuthorRef       : author reference (e.g. acronym)
          g:C_Email           : email address
          g:C_Company         : name of the company / institution
          g:C_Project         : project
          g:C_CopyrightHolder : the copyright holder

2. group: Sets the template directory and the names of the template files (see below).

3. group: g:C_Comments        : The initial comment style (C = yes, C++ = no).
          g:C_CodeSnippets    : The name of the code snippet directory (see below).
          g:C_Pager           : The name of the filter used when the output of a 
                                C program is run through a filter for paging 
                                through text.
          g:C_Dictionary_File : The name(s) of the dictionary file(s) used for 
                                word completion (see also |csupport-dictionary|)
          g:C_LoadMenus       : Load menus and mappings ("yes", "no") at startup.
          g:C_MenuHeader      : Switch the submenu header on/off.
          
4. group: g:C_CExtension      : The extension of C files. Everything else is C++ .
          g:C_CCompiler       : The name of the C compiler.
          g:C_CplusCompiler   : The name of the C++ compiler.
          g:C_CFlags          : Compiler flags used for a compilation.
          g:C_LFlags          : Compiler flags used for linkage.
          g:C_Libs            : Libraries to link with.

To override the default add appropriate assignments to .vimrc .
Here are my settings as an example:

  let g:C_AuthorName      = "Dr.-Ing. Fritz Mehner"     
  let g:C_AuthorRef       = "Mn"                         
  let g:C_Email           = "mehner@fh-swf.de"            
  let g:C_Company         = "FH Südwestfalen, Iserlohn"    

The root menu
-------------
The variable g:C_Root, if set (in .vimrc or in .gvimrc), give the name of the
single Vim root menu entry in which the C/C++ submenus will be put. 
The default is 
                  '&C\/C\+\+.'
Note the termination dot. A single root menu entry is nice if the screen is
limited or several plugins are use.

If set to "", this single root menu entry will not appear.  Now all submenus
are put into the Vim root menu. 


=======================================================================================
  TEMPLATE FILES AND TAGS
=======================================================================================

Many menu entries generate comments or commented code. The style of these comments
can be toggled between C-style ( /*...*/ ) and C++-style ( //... ).  2 menu entries
have a fixed style ( C-/C++ line end comment)

6 menu entries generate block comments:

    C/C++-file header
    Class Description
    Frame Block
    Function Description
    H-file header
    Method Description

The comments which will be inserted by these menus entries are read from files:

+--------------------------+--------------------------------------------------------+
| menu entry               | global variable           | file (distribution set)    |
+--------------------------+---------------------------+----------------------------+
| C/C++-file header        | g:C_Template_C_File       | c-file-header              |
| Class Description        | g:C_Template_Class        | c-class-description        |
| Frame Block              | g:C_Template_Frame        | c-frame                    |
| Function Description     | g:C_Template_Function     | c-function-description     |
| H-file header            | g:C_Template_H_File       | h-file-header              |
| Method Description       | g:C_Template_Method       | c-method-description       |
| class                    | g:C_Class                 | c-class                    |
| class using new          | g:C_ClassUsingNew         | c-class-using-new          |
| template class           | g:C_TemplateClass         | c-template-class           |
| template class using new | g:C_TemplateClassUsingNew | c-template-class-using-new |
| error class              | g:C_ErrorClass            | c-error-class              |
+--------------------------+--------------------------------------------------------+

There may be a second set of files pointed to by the global variables whose names
start with  g:Cpp_Temp... .
The second set of variables can point to the same files as the first set or to
another set (but both in the template directory).
If the second set is empty (i.e. all file names are empty strings: "") the style toggle
entry does not appear in the Comments-menu.
If the second set is not empty it is assumed that these files contain C++-style blocks
and the style toggle entry in the Comments-menu is present.

The template files can be written or changed by the user to fulfill special
requirements (layout for a project or workgroup already exists, file headers / blocks
have to be prepared for a documentation tool, ... ).
They can hold not only comments but a complete file skeleton if this is necessary.
So you may want to lay out your own templates.

The comments in these files do not have to be personalized but they can be.
The text can contain the following tags which are replaced by the appropriate
information when the file is read in:

    |AUTHOR|
    |DATE|
    |EMAIL|
    |FILENAME|
    |YEAR|

    |AUTHORREF|
    |COMPANY|
    |COPYRIGHTHOLDER|
    |PROJECT|
    |TIME|

    |CURSOR|

The first 5 tags are found in KDevelop templates. A KDevelop template file
can therefore be used without any change.
Each tag can occur more than once. The tag |CURSOR| may appear only once.

The tag |CURSOR| will be the cursor position after the block is read in.
There is no need to use any of these tags, some or all can be missing.

The template files can actually be links pointing to existing templates.


=======================================================================================
  CODE SNIPPETS
=======================================================================================

Code snippets are pieces of code which are kept in separate files in a special 
directory. File names are used to identify the snippets.
The snippet directory has to be created by the user 
( $HOME/.vim/codesnippets-c is the default).
Snippets are managed with the 3 entries 

   C/C++ -> Snippets -> read  code snippet
   C/C++ -> Snippets -> write code snippet
   C/C++ -> Snippets -> edit  code snippet

from the Snippets submenu.

Creating a new snippet:  
-----------------------
When nothing is marked, "write code snippet" will write the whole buffer 
to a snippet file, otherwise the marked area will be written to a file.

Insert a snippet:
-----------------
Select the appropriate file from the snippet directory ("read  code snippet").
The inserted lines will be indented.


=======================================================================================
  C DICTIONARIES
=======================================================================================

The files  

  c-c++-keywords.list 
  k+r.list  
  stl_index.list  
  xforms.list
  german.list

can be used as dictionaries for automatic word completion. 
In order to use this feature

(1) copy this file to an appropriate location, e.g.

      $HOME/.vim/wordlists/

(2) and put the following lines into  .vimrc  to use them:

      let g:C_Dictionary_File =                         $HOME."/.vim/wordlists/c-c++-keywords.list"
      let g:C_Dictionary_File = g:C_Dictionary_File.",".$HOME."/.vim/wordlists/k+r.list"
      let g:C_Dictionary_File = g:C_Dictionary_File.",".$HOME."/.vim/wordlists/stl_index.list"
      let g:C_Dictionary_File = g:C_Dictionary_File.",".$HOME."/.vim/wordlists/xforms.list"
      let g:C_Dictionary_File = g:C_Dictionary_File.",".$HOME."/.vim/wordlists/german.list"

(3) Copy the filetype plugin  ftplugin/sh.vim  to 

      $HOME/.vim/ftplugin/c.vim
  
This will create a local dictionary for each C/C++ file and enable keyword 
completion for C/C++ using Vim's dictionary feature CTRL-X CTRL-K.


=======================================================================================
  SPEED UP TYPING / SAVE KEYSTROKES
=======================================================================================

(1) gvim. Toggle 'insert mode' <--> 'normal mode' with the right mouse button
    (see mapping in file costumization.gvimrc).

(2) gvim. Use tear off menus and

(3) try 'Focus under mouse' as window behavior (No mouse click when the mouse pointer 
    is back from the menu entry).

(4) Use Emulate3Buttons "on" (X11) even for a 3-button mouse. Pressing left and right
    button at the same time without moving your fingers is faster then moving a finger
    to the middle button (often a wheel).

=======================================================================================

